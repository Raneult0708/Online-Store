{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comotorage</title>
    <link rel="stylesheet" href="{% static "css/profil.css" %}">
</head>
<body>
    <header>
        <div class="header-1">
            <h1 class="welcome-title">Bienvenue sur IFRI Comotorage üöó üèçÔ∏è !</h1>
            <p style="font-style: italic;">Le covoiturage qui unit les √©tudiants d'IFRI sur tous leurs d√©placements quotidiens</p>
        </div>
        <div class="header-2">
            <a href="{% url "accueil" %}" class="btn accueil">Accueil</a>
            <a href="{% url "profil" %}" class="btn profil">Profil</a>
            <a href="#" class="btn messages">Messages</a>
            <a href="#" class="btn search-ride">Rechercher un trajet</a>
            <a href="{% url "publish_ride" %}" class="btn publish-ride">Publier un trajet</a>
            <a href="#" class="btn ask-ride">Demander un trajet</a>
        </div>
        <div class="header-3">
            <a href="#" id="connect" class="btn connect" onclick="openModal()">Connexion</a>
            <a href="#" id="sign-up" class="btn sign-up">Inscription</a>
        </div>
    </header>
    <main class="main">
          <div class="profile-container">
    <div class="profile-header">
      <img id="photo" src="{% static "images/default_v2.jpeg" %}" alt="Photo de profil">
      <div class="photo-actions">
        <input type="file" id="photoInput" accept="image/*" hidden>
        <button type="button" id="addPhotoBtn">Ajouter une photo</button>
        <button type="button" id="removePhotoBtn">Supprimer la photo</button>
      </div>
      <h1 id="nom">Jean KOUASSI</h1>
      <p id="bio">√âtudiant √† IFRI int√©ress√© par le covoiturage vers le campus </p>
    </div>

    <div class="profile-details">
      <p><strong>R√¥le :</strong> <span id="role">Conducteur</span></p>
      <p><strong>Point de d√©part :</strong> <span id="depart">Zogbadj√®</span></p>
      <p><strong>Heures :</strong> <span id="horaires">06h30 ‚Üí 08h00</span></p>
      <div id="vehicule-info">
        <p><strong>V√©hicule :</strong> <span id="vehicule">Toyota Corolla</span></p>
        <p><strong>Places disponibles :</strong> <span id="places">3</span></p>
      </div>
    </div>

    <div class="profile-stats">
      <p><strong>Trajets partag√©s :</strong> <span id="trajets">12</span></p>
      <p><strong>Abonn√©s :</strong> <span id="abonnes">48</span></p>
    </div>

    <button id="modifierBtn">Modifier le profil</button>

    <form id="modifierForm" style="display:none;">
      <label>Nom : <input type="text" id="inputNom"></label>
      <label>Bio : <input type="text" id="inputBio"></label>
      <label>Point de d√©part : <input type="text" id="inputDepart"></label>
      <label>Horaires : <input type="text" id="inputHoraires"></label>
      <label>R√¥le :
        <select id="inputRole">
          <option value="Conducteur">Conducteur</option>
          <option value="Passager">Passager</option>
        </select>
      </label>
      <div id="formVehicule">
        <label>V√©hicule : <input type="text" id="inputVehicule"></label>
        <label>Places disponibles : <input type="number" id="inputPlaces" min="1" max="6"></label>
      </div>
      <button type="submit">Enregistrer</button>
    </form>

    <button id="ajouterInfosBtn">Ajouter plus d'infos</button>

    <form id="ajoutInfoForm" style="display: none;">
      <label>Nom de l'information :
        <input type="text" id="champNom" placeholder="ex: Facult√©">
      </label>
      <label>Valeur :
        <input type="text" id="champValeur" placeholder="ex: IA / GL">
      </label>
      <button type="submit">Ajouter</button>
    </form>
  </div>
  <script>
    const connect = document.getElementById('connect');
    const sign_up = document.getElementById('sign-up');
    connect.style.display = 'none';
    sign_up.style.display = 'none';
    document.addEventListener("DOMContentLoaded", () => {
      const btnModifier = document.getElementById("modifierBtn");
      const form = document.getElementById("modifierForm");

      const inputNom = document.getElementById("inputNom");
      const inputBio = document.getElementById("inputBio");
      const inputDepart = document.getElementById("inputDepart");
      const inputHoraires = document.getElementById("inputHoraires");
      const inputRole = document.getElementById("inputRole");
      const inputVehicule = document.getElementById("inputVehicule");
      const inputPlaces = document.getElementById("inputPlaces");
      const formVehicule = document.getElementById("formVehicule");

      btnModifier.addEventListener("click", () => {
        form.style.display = form.style.display === "none" ? "block" : "none";

        inputNom.value = document.getElementById("nom").textContent;
        inputBio.value = document.getElementById("bio").textContent;
        inputDepart.value = document.getElementById("depart").textContent;
        inputHoraires.value = document.getElementById("horaires").textContent;
        inputRole.value = document.getElementById("role").textContent;
        inputVehicule.value = document.getElementById("vehicule").textContent;
        inputPlaces.value = document.getElementById("places").textContent;
      });

      inputRole.addEventListener("change", () => {
        formVehicule.style.display = inputRole.value === "Conducteur" ? "block" : "none";
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        document.getElementById("nom").textContent = inputNom.value;
        document.getElementById("bio").textContent = inputBio.value;
        document.getElementById("depart").textContent = inputDepart.value;
        document.getElementById("horaires").textContent = inputHoraires.value;
        document.getElementById("role").textContent = inputRole.value;

        if (inputRole.value === "Conducteur") {
          document.getElementById("vehicule").textContent = inputVehicule.value;
          document.getElementById("places").textContent = inputPlaces.value;
          document.getElementById("vehicule-info").style.display = "block";
        } else {
          document.getElementById("vehicule-info").style.display = "none";
        }

        form.style.display = "none";
      });

      const addPhotoBtn = document.getElementById("addPhotoBtn");
      const removePhotoBtn = document.getElementById("removePhotoBtn");
      const photoInput = document.getElementById("photoInput");
      const photo = document.getElementById("photo");

      addPhotoBtn.addEventListener("click", () => {
        photoInput.click();
      });

      photoInput.addEventListener("change", () => {
        const file = photoInput.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            photo.src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });

      removePhotoBtn.addEventListener("click", () => {
        photo.src = "{% static "images/default_v2.jpeg" %}";
      });

      const ajouterInfosBtn = document.getElementById("ajouterInfosBtn");
      const ajoutInfoForm = document.getElementById("ajoutInfoForm");
      const champNom = document.getElementById("champNom");
      const champValeur = document.getElementById("champValeur");

      ajouterInfosBtn.addEventListener("click", () => {
        ajoutInfoForm.style.display = ajoutInfoForm.style.display === "none" ? "block" : "none";
      });

      ajoutInfoForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const nomChamp = champNom.value.trim();
        const valeurChamp = champValeur.value.trim();
        if (nomChamp && valeurChamp) {
          const container = document.querySelector(".profile-details");
          const ligne = document.createElement("p");
          const strong = document.createElement("strong");
          const span = document.createElement("span");
          strong.textContent = nomChamp + " : ";
          span.textContent = valeurChamp;
          ligne.appendChild(strong);
          ligne.appendChild(span);
          container.appendChild(ligne);
          champNom.value = "";
          champValeur.value = "";
          ajoutInfoForm.style.display = "none";
        } else {
          alert("Remplis les deux champs !");
        }
      });
    });
  </script>
    </main>
    <footer class="target section-3s">
        <div class="footer-container">
            <div class="footer-1">
                <div class="footer-1-1">
                    <h3>IFRI Comotorage üöó üèçÔ∏è</h3>
                    <p>Demain, vous concevrez les applications qui changeront le monde.
                        Aujourd'hui, utilisez celle qui va changer vos trajets !
                    </p>
                    <div class="social-icons">
                        <a href="#"><img src="{% static "images/facebook.png" %}" alt=""></a>
                        <a href="#"><img src="{% static "images/instagram.png" %}" alt=""></a>
                        <a href="#"><img src="{% static "images/linkedin.png" %}" alt=""></a>
                        <a href="#"><img src="{% static "images/twitter.png" %}" alt=""></a>
                        <a href="#"><img src="{% static "images/youtube.png" %}" alt=""></a>
                    </div>
                </div>
                <div class="footer-1-2">
                    <ul>
                        <li style="color: rgb(45, 155, 255);"><h3>Liens rapides</h3></li>
                        <li><a href="#">Accueil</a></li>
                        <li><a href="#">Rechercher un trajet</a></li>
                        <li><a href="#">Publier un trajet</a></li>
                        <li><a href="#">Demander un trajet</a></li>
                    </ul>
                </div>
                <div class="footer-1-3">
                    <ul>
                        <li style="color: rgb(45, 155, 255);"><h3>Ressources</h3></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Conditions d'utilisation</a></li>
                        <li><a href="#">Politique de confidentialit√©</a></li>
                    </ul>
                </div>
                <div class="footer-1-4">
                    <ul>
                        <li style="color: rgb(45, 155, 255);"><h3>Contact</h3></li>
                        <li><a href="#">üåç IFRI, Universit√© d'Abomey-Calavi, B√©nin</a></li>
                        <li><a href="#">üì± (+229) 55 02 80 70</a></li>
                        <li><a href="#">‚úâÔ∏è PIL1_2425_1@gmail.com</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-2">
                <p class="copyright">¬© 2025 IFRI Comotorage. Tous droits r√©serv√©s.</p>
                <p class="mentions-legales">
                    <a href="#">Mentions l√©gales</a> | 
                    <a href="#">Politique de confidentialit√©</a> | 
                    <a href="#">Conditions d'utilisation</a>
                </p>
            </div>
        </div>
    </footer>

    <div id="modal">
        <div id="modal-content">
          <h3>Connexion</h3>
          <input type="email" placeholder="Email">
          <input type="password" placeholder="Mot de passe">
          <button onclick="closeModal()">Se connecter</button>
        </div>
    </div>
    <script>
        function openModal() {
            document.getElementById('modal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>